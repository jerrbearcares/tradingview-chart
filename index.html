<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TradingView Chart with Custom Indicators</title>
  <style>
    /* Force full-screen layout */
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
    }
    #tradingview_chart {
      height: 100vh; /* Full viewport height */
      width: 100%;
    }
  </style>
</head>
<body>
  <!-- TradingView Widget Container -->
  <div class="tradingview-widget-container">
    <div id="tradingview_chart"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
      // Utility to read URL parameters (for dynamic symbol selection)
      function getParameterByName(name) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var url = window.location.href;
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
        var results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }
      
      // Default symbol is NASDAQ:AAPL; override if 'symbol' parameter is provided.
      var symbol = getParameterByName('symbol') || "NASDAQ:AAPL";
      
      new TradingView.widget({
        "container_id": "tradingview_chart",
        "width": "100%",
        "height": "100%",
        "symbol": symbol,
        "interval": "D",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "hide_top_toolbar": true,
        "save_image": false,
        "studies": [
          "MA@tv-basicstudies",   // First instance for 5 SMA
          "MA@tv-basicstudies",   // Second instance for 20 SMA
          "VWAP@tv-basicstudies", // VWAP
          "BB@tv-basicstudies"    // Bollinger Bands
        ],
        "studies_overrides": {
          // Override for first MA (5 SMA)
          "MA@tv-basicstudies.input.length": "5",
          // Override for second MA (20 SMA)
          "MA@tv-basicstudies.input.length.1": "20",
          // Override for Bollinger Bands (period 20, 2 std dev)
          "BB@tv-basicstudies.input.length": "20",
          "BB@tv-basicstudies.input.stdDev": "2"
        }
      });
    </script>
  </div>
</body>
</html>
